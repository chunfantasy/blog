---
layout: post
title: Elastic Note
description: "This post contains the note about how to solve the problem happened when using Elastic."
modified: 2016-10-01
tags: [Framework]
comments: true
image:
  feature: 2016-06-01-elastic.png
---

# Elasticsearch

{% highlight bash %}
$ sudo apt-get install snmp snmpd
{% endhighlight %}



# Logstash

## Input

All the plugins are configured in input
{% highlight bash %}
input {
    ...
    file {
        ...
    }
    ...
}
{% endhighlight %}

General configuration for input file
{% highlight bash %}
file {
    # Use "/"" instead of "\" in Windows in order to mach all files
    # The value has to be type of array if it is more than one file
    path => ["C:/ertmslog/rbc/out/*"]
    # Start parsing from the beginning
    start_position => "beginning"
    # sincedb_path is "/dev/null" for for Linux and "Nul" for Windows in order not to remember the status of input files.
    # sincedb_path => "/dev/null"
    # sincedb_path => "Nul"
    sincedb_path => "C:/ertmslog/.sincedb_ertms_log_rbc"
    # Set time longer for testing, the default value is one day in seconds
    ignore_older => 8640000
    type => "rbc"
}
{% endhighlight %}

Plain text input for example txt file and also csv file
{% highlight bash %}
file {
    ...
    codec => plain {
        charset => "ISO-8859-1"
    }
}
{% endhighlight %}

Multiline input for example xml file
{% highlight bash %}
file {
    ...
    codec => multiline {
        pattern => "^<packet>"
        negate => "true"
        what => "previous"
        charset => "ISO-8859-1"
    }
}
{% endhighlight %}


## Filter


## Output

General configuration for output
{% highlight bash %}
output {
    if [type] == "atb_coordinate" or [type] == "atb_coordinate_2" {
        # Output to Elasticsearch
        elasticsearch {
            hosts => ["localhost:9202"]
            index => "ertms-static-atb"
            document_type => "coordinate"
        }
        # Output to terminal, this can be used for testing
        stdout { }
    }
}
{% endhighlight %}